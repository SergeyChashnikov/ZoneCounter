import os
import cv2  # Импортируем OpenCV, если требуется для некоторых констант (например, шрифт для визуализации)

# ------------------------------------------------------------------------------
# Базовые настройки проекта
# ------------------------------------------------------------------------------

# Определяем базовую директорию проекта. Это позволяет строить абсолютные пути
# относительно расположения этого файла.
BASE_DIR = os.path.dirname(os.path.abspath(__file__))

# ------------------------------------------------------------------------------
# Пути к данным и логам
# ------------------------------------------------------------------------------

# Путь к директории с данными (например, с видео и изображениями для тестирования).
# Здесь предполагается, что структура проекта содержит папку data на одном уровне с src.
DATA_DIR = os.path.join(BASE_DIR, "..", "data")

# Путь к директории, куда будут сохраняться логи работы проекта.
LOG_DIR = os.path.join(BASE_DIR, "..", "logs")
# Если директория не существует, создаем её автоматически.
if not os.path.exists(LOG_DIR):
    os.makedirs(LOG_DIR)

# ------------------------------------------------------------------------------
# Настройки модели и детекции
# ------------------------------------------------------------------------------

# Если вы используете локальные веса модели YOLO (например, yolov5s.pt),
# укажите путь к файлу модели. Если модель загружается через torch.hub,
# эту переменную можно оставить пустой или задать None.
YOLO_MODEL_PATH = os.path.join(BASE_DIR, "models", "yolov5s.pt")

# Порог уверенности детекции. Объекты с confidence ниже этого значения
# не будут учитываться.
CONFIDENCE_THRESHOLD = 0.5

# ------------------------------------------------------------------------------
# Настройки трекинга
# ------------------------------------------------------------------------------

# Максимальное количество кадров, на протяжении которых объект может отсутствовать,
# прежде чем его трек будет удалён.
TRACKER_MAX_AGE = 30

# Количество последовательных детекций, необходимых для подтверждения нового трека.
TRACKER_N_INIT = 3

# ------------------------------------------------------------------------------
# Настройки зоны (Region Of Interest - ROI)
# ------------------------------------------------------------------------------

# Определяем зону для анализа (например, прямоугольная область на кадре),
# где происходит подсчет уникальных track_id и времени нахождения.
# Формат: (xA, yA, xB, yB), где (xA, yA) – верхний левый угол,
# а (xB, yB) – нижний правый угол.
ZONE_COORDS = (100, 100, 400, 400)

# ------------------------------------------------------------------------------
# Настройки визуализации
# ------------------------------------------------------------------------------

# Параметры для отображения текста на изображениях:
VISUALIZATION_FONT = cv2.FONT_HERSHEY_SIMPLEX  # Шрифт OpenCV
VISUALIZATION_FONT_SCALE = 0.5                 # Масштаб шрифта
VISUALIZATION_FONT_THICKNESS = 2               # Толщина линии текста

# ------------------------------------------------------------------------------
# Общие настройки
# ------------------------------------------------------------------------------

# Режим отладки. Если DEBUG=True, проект может выводить дополнительную
# информацию для отладки, например, подробные логи работы.
DEBUG = True

# Порт для API сервера (если вы планируете запускать бэкенд-сервис)
API_PORT = 8000

# ------------------------------------------------------------------------------
# Примечание:
# Этот файл является центральным местом для настройки основных параметров проекта.
# При необходимости добавляйте новые переменные или изменяйте существующие.
# Все пути, пороги, настройки трекинга и визуализации можно изменять здесь,
# что позволит гибко адаптировать проект под разные условия и среды.
# ------------------------------------------------------------------------------
